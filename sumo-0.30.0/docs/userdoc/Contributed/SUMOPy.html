<!DOCTYPE html>

<html lang="en">
<head>
  <title>Contributed/SUMOPy - SUMO - Simulation of Urban Mobility</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="../sumo.css">
  <link rel="license" href=
  "http://creativecommons.org/licenses/by-sa/3.0/">
</head>

<body id="bmission">
  <div id="container">
    <div id="logo" style="text-align:left">
      <img src="../logo.png" width="128" height="128"
      alt="SUMO-Simulation of Urban Mobility" style=
      "float:left; margin-left:10px; margin-right:20px;">
      <div id="logo_text1">SUMO</div>
      <div id="logo_text2">Simulation of Urban MObility</div>
    </div>

    <div id="subsMenu">
      <ul>
        <li class="sub"><a href=
        "http://sumo.dlr.de/">Home</a></li>

        <li class="sub"><a href="../Downloads.html">Download</a></li>

        <li class="sub"><a href="../index.html">Documentation</a></li>

        <li class="sub"><a href=
        "http://sumo.dlr.de/wiki/">Wiki</a></li>

        <li class="sub"><a href=
        "http://sumo.dlr.de/trac/">Trac</a></li>

        <li class="sub"><a href=
        "http://sumo.dlr.de/blog/">Blog</a></li>

        <li class="sub"><a href="../Contact.html">Contact</a></li>

        <li class="sub"><a href=
        "http://sourceforge.net/projects/sumo/">SF-Project</a></li>
      </ul>
    </div>

    <div id="nav">
      <div id="step1">
        <h3>User</h3>
        <ul>
        <!-- nav begins --> <li>Introduction</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Sumo_at_a_Glance.html">The traffic simulation SUMO</a></li>
</ul></li>
  <li>Basic Usage</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Basics/Notation.html">Notation in this Documentation</a></li>
  <li><a href="../Basics/Basic_Computer_Skills.html">Needed, basic Computer Skills</a></li>
  <li><a href="../Installing.html">Installing SUMO</a></li>
  <li><a href="../Basics/Using_the_Command_Line_Applications.html">Using SUMO Command Line Applications</a></li>
  <li><a href="../Tutorials.html">Tutorials</a></li>
  <li><a href="../XMLValidation.html">Validating application inputs</a></li>
</ul></li>
  <li>Network Building</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Networks/SUMO_Road_Networks.html">SUMO Road Networks</a></li>
  <li><a href="../Networks/Abstract_Network_Generation.html">Abstract networks generation</a></li>
  <li><a href="../NETCONVERT.html">NETCONVERT</a></li>
<li style="list-style: none; display: inline"><ul>
   <li><a href="../Networks/Building_Networks_from_own_XML-descriptions.html">Defining own networks using XML</a></li>
   <li><a href="../Networks/Import.html">Importing non-SUMO networks</a></li>
<li style="list-style: none; display: inline"><ul>
    <li><a href="../Networks/Import/OpenStreetMap.html">from OpenStreetMap</a></li>
<li style="list-style: none; display: inline"><ul>
     <li><a href="../Networks/Import/OpenStreetMap.html#3-click_scenario_generation">3-Click Scenario Generator</a></li>
</ul></li>
    <li><a href="../Networks/Import/VISUM.html">from VISUM</a></li>
    <li><a href="../Networks/Import/Vissim.html">from Vissim</a></li>
    <li><a href="../Networks/Import/OpenDRIVE.html">from OpenDRIVE</a></li>
    <li><a href="../Networks/Import/MATsim.html">from MATsim</a></li>
    <li><a href="../Networks/Import/ArcView.html">from ArcView (shapefiles)</a></li>
    <li><a href="../Networks/Import/DlrNavteq.html">from DlrNavTeq</a></li>
    <li><a href="../Networks/Import/RoboCup.html">from Robocup Simulation League</a></li>
</ul></li>
   <li><a href="../Networks/Import/SUMO_Road_Networks.html">Importing SUMO networks</a></li>
   <li><a href="../Simulation/Motorways.html#Building_a_network_for_motorway_simulation">Building networks for motorway simulation</a></li>
   <li><a href="../Simulation/Pedestrians.html#Building_a_network_for_pedestrian_simulation">Building networks for pedestrian simulation</a></li>
   <li><a href="../Networks/Further_Options.html">Further NETCONVERT options</a></li>
   <li><a href="../Networks/Further_Outputs.html">Additional output</a></li>
</ul></li>
  <li><a href="../NETEDIT.html">Creating and modifying networks with NETEDIT</a></li>
  <li><a href="../Networks/Elevation.html">Including elevation data</a></li>
</ul></li>
  <li>Demand Modelling</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Demand/Introduction_to_demand_modelling_in_SUMO.html">Introduction to SUMO Demand Modelling</a></li>
  <li><a href="../Definition_of_Vehicles,_Vehicle_Types,_and_Routes.html">Definition of Vehicles, Vehicle Types, and Routes</a></li>
  <li><a href="../Simulation/Public_Transport.html">Simulation of public transport</a></li>
  <li><a href="../Specification/Persons.html">Simulation of individual persons and trip chains</a></li>
  <li><a href="../Specification/Logistics.html">Simulation of logistics</a></li>
  <li><a href="../Demand/Shortest_or_Optimal_Path_Routing.html">Shortest or Optimal Path Routing</a></li>
  <li><a href="../IntermodalRouting.html">Intermodal Routing</a></li>
  <li><a href="../Demand/Automatic_Routing_.html">Routing in the Simulation</a></li>
  <li><a href="../Demand/Dynamic_User_Assignment.html">Computing Dynamic User Assignment</a></li>
  <li><a href="../Tools/Misc.html#createVehTypeDistributions.py">Generate a vehicle type distribution to model the fleet</a></li>
</ul></li>
  <li>Data sources for demand generation</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Demand/Importing_O/D_Matrices.html">Importing O/D Matrices</a></li>
<li style="list-style: none; display: inline"><ul>
   <li><a href="../Demand/Further_Ways_to_import_VISUM_Demand_Definitions.html">Other VISUM Demand Importers</a></li>
   <li><a href="../Demand/Further_Ways_to_import_Vissim_Demand_Definitions.html">Other Vissim Demand Importers</a></li>
</ul></li>
  <li><a href="../Demand/Routes_from_Observation_Points.html">Routes from Observation Points</a></li>
  <li><a href="../Demand/Routing_by_Turn_Probabilities.html">Routing by Turn Probabilities</a></li>
  <li><a href="../Demand/Activity-based_Demand_Generation.html">Activity-based Demand Generation</a></li>
  <li><a href="../Tools/Trip.html#randomTrips.py">Random Trips</a></li>
</ul></li>
  <li>Simulation</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Simulation/Basic_Definition.html">Basic Definition</a></li>
  <li><a href="../Simulation/Output.html">Simulation output</a></li>
  <li><a href="../TraCI.html">TraCI (On-line Interaction)</a></li>
  <li><a href="../Simulation/SaveAndLoad.html">Saving and Loading Simulation State</a></li>
</ul></li>
  <li> Traffic Management and Other Structures </li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Simulation/Traffic_Lights.html">Traffic Lights</a></li>
  <li><a href="../Simulation/Public_Transport.html">Public Transport</a></li>
  <li><a href="../Simulation/Variable_Speed_Signs.html">Variable Speed Signs</a></li>
  <li><a href="../Simulation/Rerouter.html">Rerouter / Alternative Route Signage</a></li>
  <li><a href="../Simulation/Vaporizer.html">Vaporizer</a></li>
  <li><a href="../Simulation/Calibrator.html">Dynamic calibration of flow and speed</a></li>
  <li><a href="../Simulation/ParkingArea.html">Parking areas</a></li>
</ul></li>
  <li> Traffic Modes </li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Simulation/Pedestrians.html">Pedestrian simulation</a></li>
  <li><a href="../Simulation/Bicycles.html">Bicycle simulation</a></li>
  <li><a href="../Simulation/Railways.html">Railway simulation</a></li>
  <li><a href="../Simulation/Waterways.html">Waterway simulation</a></li>
</ul></li>
  <li> Additional Features </li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Models/Emissions.html">Emissions</a></li>
  <li><a href="../Models/Electric.html">Electric Vehicles</a></li>
  <li><a href="../Specification/Logistics.html">Logistics</a></li>
  <li><a href="../Simulation/GenericParameters.html">Generic Parameters</a></li>
  <li><a href="../Simulation/Shapes.html">Shapes Visualisation</a></li>
  <li><a href="../Simulation/Bluetooth.html">Wireless Device Detection</a></li>
  <li><a href="../Simulation/Emergency.html">Emergency Vehicles</a></li>
</ul></li>
  <li> Model details </li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Simulation/VehicleSpeed.html">Vehicle speed</a></li>
  <li><a href="../Simulation/VehicleInsertion.html">Vehicle insertion</a></li>
  <li><a href="../Simulation/VehiclePermissions.html">Vehicle permissions (access restrictions)</a></li>
  <li><a href="../Simulation/Intersections.html">Intersection dynamics</a></li>
  <li><a href="../Simulation/Randomness.html">Randomness</a></li>
  <li><a href="../Simulation/Routing.html">Routing and Re-routing</a></li>
  <li><a href="../Simulation/SublaneModel.html">Sublane Model</a></li>
  <li><a href="../Simulation/OppositeDirectionDriving.html">Opposite Direction Driving</a></li>
  <li><a href="../Simulation/Safety.html">Safety</a></li>
  <li><a href="../Simulation/Meso.html">Mesoscopic model</a></li>
</ul></li>
  <li> Common Problems </li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Simulation/Why_Vehicles_are_teleporting.html">Why Vehicles are teleporting</a></li>
  <li><a href="../FAQ.html#The_simulation_has_lots_of_jams.2Fdeadlocks._What_can_I_do.3F">Unexpected jamming</a></li>
  <li><a href="../FAQ.html#Why_do_the_vehicles_perform_unexpected_lane-changing_maneuvers.3F">Unexpected lane-changing maneuvers?</a></li>
  <li><a href="../FAQ.html#How_do_I_get_high_flows.2Fvehicle_densities.3F">How to get high flows?</a></li>
</ul></li>
  <li><a href="../Tools/Main.html">Additional Tools</a></li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Tools/Import/OSM.html#osmWebWizard.py">osmWebWizard</a></li>
  <li><a href="../TraCI/Interfacing_TraCI_from_Python.html">TraCI/Interfacing_TraCI_from_Python</a></li>
  <li><a href="../Tools/Sumolib.html">Reading SUMO networks and outputs with Python (sumolib)</a></li>
  <li><a href="../Tools/Xml.html">Tools for converting SUMO outputs to CSV/Spreadsheet</a></li>
  <li><a href="../Tools/TraceExporter.html">Exporting mobility Traces (traceExporter)</a></li>
  <li><a href="../Tools/Net.html#netdiff.py">Determining the differences between two networks</a></li>
  <li><a href="../Tools/Visualization.html">Tools/Visualization</a></li>
  <li><a href="../Tools/Main.html">Tool index</a></li>
</ul></li>
  <li>Theory</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../Theory/Traffic_Simulations.html">Traffic simulations in general</a></li>
</ul></li>
  <li>Application Manuals</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../SUMO.html">SUMO</a></li>
  <li><a href="../SUMO-GUI.html">SUMO-GUI</a></li>
  <li><a href="../NETCONVERT.html">NETCONVERT</a></li>
  <li><a href="../NETEDIT.html">NETEDIT</a></li>
  <li><a href="../NETGENERATE.html">NETGENERATE</a></li>
  <li><a href="../OD2TRIPS.html">OD2TRIPS</a></li>
  <li><a href="../DUAROUTER.html">DUAROUTER</a></li>
  <li><a href="../JTRROUTER.html">JTRROUTER</a></li>
  <li><a href="../DFROUTER.html">DFROUTER</a></li>
  <li><a href="../MAROUTER.html">MAROUTER</a></li>
  <li><a href="../POLYCONVERT.html">POLYCONVERT</a></li>
  <li><a href="../ACTIVITYGEN.html">ACTIVITYGEN</a></li>
  <li><a href="../Tools/Emissions.html">EMISSIONSMAP</a></li>
  <li><a href="../Tools/Emissions.html">EMISSIONSDRIVINGCYCLE</a></li>
</ul></li>
  <li>Appendices</li>
<li style="list-style: none; display: inline"><ul>
  <li><a href="../ChangeLog.html">ChangeLog</a></li>
  <li><a href="../Other/Glossary.html">Glossary</a></li>
  <li><a href="../FAQ.html">FAQ</a></li>
  <li><a href="../Tools/Main.html">Additional Tools</a></li>
  <li><a href="../Other/File_Extensions.html">Known File Extensions</a></li>
</ul></li>
<!-- nav ends -->
        </ul>
      </div>

      <div id="step2">
        <h3>Further Resources</h3>

        <ul>
          <li><a href="../Data/Networks.html">Example
          Networks</a></li>

          <li><a href="../Data/Scenarios.html">Example
          Scenarios</a></li>

          <li><a href="../Data/Traffic_Data.html">Traffic
          Data</a></li>
        </ul>
      </div>

      <div id="step3">
        <h3>Developer</h3>

        <ul>
          <li><a href="../Developer/Main.html">Developer Docs</a></li>

          <li><a href="http://sumo.dlr.de/daily/">Daily Tests
          Status</a></li>

          <li><a href="../../doxygen/">Doxygen Documentation</a></li>

          <li>Python Modules Documentation</li>

          <li style="list-style: none; display: inline">
            <ul>
              <li><a href="../../pydoc/traci.html">traci</a></li>

              <li><a href="../../pydoc/sumolib.html">sumolib</a></li>
            </ul>
          </li>

          <li>Java Modules Documentation</li>

          <li style="list-style: none; display: inline">
            <ul>
              <li><a href="../../javadoc/traci4j/">TraCI4J</a></li>

              <li><a href="../../javadoc/traas/">TraaS</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div id="content">
      <a id="top"></a>

						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">Contributed/SUMOPy</h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">generated on 2017-05-02 00:27:04.001664 from <a href="http://sumo.dlr.de/wiki/Contributed/SUMOPy">the wiki page for Contributed/SUMOPy</a> for SUMO 0.30.0</div>
								<div id="contentSub"></div>
												
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This document describes the capabilities and basic usage of the software SUMOPy. SUMOPy is intended to expand the user-base of the traffic micro-simulator SUMO by providing a user-friendly, yet flexible simulation suite. There is an extended and better printable version of this page including demand modeling and pictures at <a rel="nofollow" class="external text" href="https://sourceforge.net/p/sumo/code/HEAD/tree/trunk/sumo/tools/contributed/sumopy/sumopy_userman_v01_contrib.pdf"><i><b>&lt;SUMO_HOME&gt;</b></i>/tools/contributed/sumopy/sumopy_userman_v01_contrib.pdf</a>. Further slightly outdated publications related to SUMOPy can be found at the <a rel="nofollow" class="external text" href="http://campus.unibo.it/200538/1/Research-A-Choudhry-657079-.pdf">University of Bologna</a> and in the <a rel="nofollow" class="external text" href="http://sumo.dlr.de/2013/SUMO2013_15-17May%202013_Berlin-Adlershof.pdf">proceedings of the SUMO2013</a>.
</p><p>A further scope of SUMOPy is to manage the huge amount of data necessary to run complex multi-modal simulations. This includes different demand generation models as well as a large range of modes, such as road transport, public transport, and bicycles. In the future also modes like self-driving cars and Personal Rapid Transit (PRT) will be supported.
</p><p>SUMOPy consists of a GUI interface, network editor as well as a simple to use scripting language which facilitates the use of SUMO.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Windows"><span class="tocnumber">2.1</span> <span class="toctext">Windows</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Linux"><span class="tocnumber">2.2</span> <span class="toctext">Linux</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#The_graphical_user_interface"><span class="tocnumber">3</span> <span class="toctext">The graphical user interface</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Getting_started.21"><span class="tocnumber">3.1</span> <span class="toctext">Getting started!</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Running_SUMOPy"><span class="tocnumber">3.1.1</span> <span class="toctext">Running SUMOPy</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Opening.2Fcreating_a_scenario"><span class="tocnumber">3.1.2</span> <span class="toctext">Opening/creating a scenario</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Browsing_the_scenario"><span class="tocnumber">3.1.3</span> <span class="toctext">Browsing the scenario</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Navigating_the_Network"><span class="tocnumber">3.1.4</span> <span class="toctext">Navigating the Network</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Simulating_the_scenario"><span class="tocnumber">3.1.5</span> <span class="toctext">Simulating the scenario</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Viewing_results"><span class="tocnumber">3.1.6</span> <span class="toctext">Viewing results</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#Launching_SUMOPy"><span class="tocnumber">3.2</span> <span class="toctext">Launching SUMOPy</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Loading_a_binary_scenario_at_start"><span class="tocnumber">3.2.1</span> <span class="toctext">Loading a binary scenario at start</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Importing_SUMO_XML_files_at_start"><span class="tocnumber">3.2.2</span> <span class="toctext">Importing SUMO XML files at start</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#Importing_and_Editing_networks"><span class="tocnumber">3.3</span> <span class="toctext">Importing and Editing networks</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Importing_nets_and_buldings"><span class="tocnumber">3.3.1</span> <span class="toctext">Importing nets and buldings</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Editing_with_SUMO.E2.80.99s_Netedit"><span class="tocnumber">3.3.2</span> <span class="toctext">Editing with SUMO’s Netedit</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#Editing_with_SUMO.E2.80.99s_Netedit_on_background_maps"><span class="tocnumber">3.3.3</span> <span class="toctext">Editing with SUMO’s Netedit on background maps</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Editing_with_SUMOPy_Networkeditor"><span class="tocnumber">3.3.4</span> <span class="toctext">Editing with SUMOPy Networkeditor</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#Demand_modeling"><span class="tocnumber">3.4</span> <span class="toctext">Demand modeling</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#Zone_to_zone_demand_flows"><span class="tocnumber">3.4.1</span> <span class="toctext">Zone to zone demand flows</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#Turn_flows"><span class="tocnumber">3.4.2</span> <span class="toctext">Turn flows</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-24"><a href="#Simulation_processes"><span class="tocnumber">3.5</span> <span class="toctext">Simulation processes</span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#Simulating_Sublanes"><span class="tocnumber">3.5.1</span> <span class="toctext">Simulating Sublanes</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction">Introduction</span></h1>
<p>SUMO rapidly developed into a flexible and powerful open-source micro-simulator for multi-modal urban traffic networks . The features and the number of tools provided are constantly increasing, making simulations ever more realistic. However, the different functionalities consist at the present state of a large number of binaries and scripts that act upon a large number of files, containing information on the network, the vehicles, districts, trips routes, configurations, and many other parameters. Scripts (mostly written in Python), binaries and data files exist in a dispersed manner. In practice, a master script is necessary to hold all processes and data together in order run a simulation of a specific scenario in a controlled way. This approach is extremely flexible, but it can become very time consuming and error prone to find the various tools, combine their input and output and generate the various configuration files. Furthermore, it reduces the user-base of SUMO to those familiar with scripting and command line interfaces. Instead, SUMO has the potential to become a multi-disciplinary simulation platform if it becomes more accessible to disciplines and competences.Scripts (mostly written in Python), binaries and data files exist in a dispersed manner.
</p><p>This problem has been recognized and different graphical user interfaces have been developed. The <i>traffic modeller</i> (also named <i>traffic generator</i>) is a tool written in Java which helps to manage files, to configure simulations and to evaluate and visualize results.
</p><p><i>SUMOPy</i> is written entirely in the object-oriented script language <i>Python</i>, it uses <i>wxWindows</i> with <i>PyOPENGL</i> as GUI interface and <i>NumPy</i> for fast numerical array-type calculations. It is similar to the <i>traffic generator</i> in that it simplifies the use of SUMO through a GUI. But SUMOPy is more than just a GUI, it is a <i>suite</i> that allows to access SUMO tools and binaries in a simple unified fashion. The distinguishing features are:
</p>
<ul><li> SUMOPy has Python instances that can make direct use of tools already available as Python code.</li>
<li> SUMOPy has a Python command line interface that allows direct and interactive manipulation of SUMOPy instances.</li>
<li> SUMOPy provides a library that greatly simplifies the scripting.</li></ul>
<h1><span class="mw-headline" id="Installation">Installation</span></h1>
<p>SUMOPy is a directory with python scripts. It is sufficient to unzip the latest version and copy it in a directory of your choice. Since SUMO-0.28, SUMOPy is inside the SUMO distribution and located in <code>SUMOHOME/tools/contributed</code>.
</p><p>However, SUMOPy makes extensive use of Python packages which need to be installed before. The <i>required</i> packages to be installed are:
</p>
<ol><li> Python 2.7</li>
<li> numpy-1.10 or newer</li>
<li> wxPython2.8 or wxPython2.9 (wxPython3.x is currently not properly working with PyOpenGL-3.0.x)</li>
<li> PyOpenGL-3.0.x</li></ol>
<p>The following packages are optional:
</p>
<ol><li> matplotlib-1.4 or newer, for high quality graphical output in different file formats.</li>
<li> PIL-1.1.7 or newer and basemap-1.0 (or pyproj) for downloading backround maps from mapservers.</li></ol>
<p>The exact choice of package-versions and installation methods depend on the operating system. Below we give short recommendations regarding the choice of packages for different operating systems. In general, the 32-bit version is preferred as there are more pre-compiled packages available, but this may change over time.
</p>
<h2><span class="mw-headline" id="Windows">Windows</span></h2>
<p>For Windows, as required packages the following are recommended:
</p>
<pre>python-2.7.12.msi (32-bit or x86 preferred)
numpy-1.10.0-win32-superpack-python2.7.exe
wxPython2.8-win32-unicode-2.8.12.1-py27.exe
PyOpenGL-3.0.2.win32.exe</pre>
<p>Optionally, install these:
</p>
<pre>matplotlib-1.4.3-cp27-none-win32.whl
basemap-1.0.8-cp27-none-win32.whl
PIL-1.1.7.win32-py2.7.exe </pre>
<h2><span class="mw-headline" id="Linux">Linux</span></h2>
<p>Python 2.7 comes with most Linux operating systems. All required additional packages are available in repositories:
</p>
<pre>python-numpy 
python-wxgtk2.8  
python-opengl 
python-imaging 
python-matplotlib 
python-mpltoolkits.basemap </pre>
<p>However, often Python 3.x is installed along the older version and may be the default Python interpreter. So make sure you run the sumopy scripts with Python 2.7
</p><p>Another issue may be <code>python-wxgtk2.8</code> in repositories of more recent distributions, as for example Ubuntu-16.04. In this case, do the following safe operation to install <code>python-wxgtk2.8</code>:
</p>
<pre>echo &quot;deb http://archive.ubuntu.com/ubuntu wily main universe&quot;| sudo tee /etc/apt/sources.list.d/wily-copies.list

sudo apt install python-wxgtk2.8

sudo rm /etc/apt/sources.list.d/wily-copies.list

sudo apt update
</pre>
<h1><span class="mw-headline" id="The_graphical_user_interface">The graphical user interface</span></h1>
<h2><span class="mw-headline" id="Getting_started.21">Getting started!</span></h2>
<h3><span class="mw-headline" id="Running_SUMOPy">Running SUMOPy</span></h3>
<p>Start the script <code>sumopy_gui.py</code> by double-clicking on it in your browser. If this fails, use a command-line application, change directory to
</p><p><code>SUMOHOME/tools/contributed/sumopy</code>
</p><p>and run sumopy with
</p><p><code>python sumopy_gui.py</code>
</p><p>If all required packages are installed correctly, you should see the main window as shown <a href="../images/Fig_sumopy_gui_main.png" title="File:Fig sumopy gui main.png">here</a>, but initially with an empty network. The object browser shows initially the main object of SUMOPy: the <i>scenario</i>, which contains all other information.
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_sumopy_gui_main.png" class="image" title="Sumopy main window with object browser, network editor and main menu"><img alt="Sumopy main window with object browser, network editor and main menu" src="../images/Fig_sumopy_gui_main.png" width="760" height="442" srcset="/w/images/thumb/c/c4/Fig_sumopy_gui_main.png/1140px-Fig_sumopy_gui_main.png 1.5x, /w/images/thumb/c/c4/Fig_sumopy_gui_main.png/1520px-Fig_sumopy_gui_main.png 2x" /></a></div></div>
<h3><span class="mw-headline" id="Opening.2Fcreating_a_scenario">Opening/creating a scenario</span></h3>
<p>There is a test scenario in the SUMOPy distribution which is located in
</p><p><code>SUMOHOME/tools/contributed/sumopy/testscenario</code>
</p><p>The quickest way to obtain results from a simulation is to import already existing <code>xml</code>-files. In case the following SUMO network, poly and route files
</p><p><code>demo.net.xml  demo.poly.xml  demo.rou.xml </code>
</p><p>are located in directory
</p><p><code>SUMOHOME/tools/contributed/sumopy/testscenario</code>
</p><p>then a new scenario can be created by importing these files into SUMOPy at ones: from the main menu, choose <code>Scenario&gt;Create from xml...</code> and insert the scenario Shortname, and Workdir in the form as shown <a href="../images/Fig_sumopy_gui_newscenario.png" title="File:Fig sumopy gui newscenario.png">here</a>.
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_sumopy_gui_newscenario.png" class="image" title="New scenario dialog"><img alt="New scenario dialog" src="../images/Fig_sumopy_gui_newscenario.png" width="600" height="452" srcset="/w/images/7/7d/Fig_sumopy_gui_newscenario.png 1.5x, /w/images/7/7d/Fig_sumopy_gui_newscenario.png 2x" /></a></div></div>
<p>The options <code> Name</code> and <code> Description</code> are free text fields. After pressing the <code> Run</code> button, network, buildings and routes will be imported. In case the trip file <code> demo.trip.xml</code> exists, it will also be imported.
</p><p>In the same way it is possible to crate an empty scenario under menu <code>Scenario&gt;New...</code>.
</p>
<h3><span class="mw-headline" id="Browsing_the_scenario">Browsing the scenario</span></h3>
<p>The object browser allows to navigate through all information of a scenario. To a certain extend, it is possible to modify data. The most important information are:
</p>
<ul><li> The network with edges, nodes, traffic light systems etc.</li>
<li> The landuse, containing also the building information from the .poly| file as well as background maps (see later how to import them).</li>
<li> The demand holds information on available vehicles types, trips and routes.</li></ul>
<h3><span class="mw-headline" id="Navigating_the_Network">Navigating the Network</span></h3>
<p>The network can be examined with the network editor. The initial editing tool allows to click on the different network elements and retrieve the respective information in the object browser.
</p><p>With the zoom-buttons (+,-) located below the network editor, different zoom levels can be obtained The 1:1 button zooms the network to fit approximately the boundaries of the window. Next to the zoom button is a button which pops up a menu when pressed. From this menu, the network elements to be drawn can be selected or un-selected.
</p><p>The following mouse-key combination allow to navigate the network:
</p>
<table>
<tr>
<th>Action
</th>
<th>Key-Mouse
</th></tr>
<tr>
<td>Zoom in/Out
</td>
<td>Hold down <code>&lt;CTRL&gt;</code> + <code>&lt;Wheel&gt;</code>
</td></tr>
<tr>
<td>Panning
</td>
<td>Hold down <code>&lt;CTRL&gt;</code> + <code>&lt;SHIFT&gt;</code> + <code>&lt;Button-Left&gt;</code>
</td></tr></table>
<h3><span class="mw-headline" id="Simulating_the_scenario">Simulating the scenario</span></h3>
<p>From the main menu select:
</p><p><code>Simulation&gt;Sumo&gt;export routes and simulate...</code>
</p><p>With this process, the current trips and routes in <code> demand.trips</code> will be automatically exported to a SUMO <code> .rou</code> file. Choose the desired simulation settings from the SUMO pop-up dialog, as shown in Fig. <a href="../images/Fig_sumopy_gui_sumo.png" title="File:Fig sumopy gui sumo.png">here</a>.
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_sumopy_gui_sumo.png" class="image" title="SUMO pop-up dialog."><img alt="SUMO pop-up dialog." src="../images/Fig_sumopy_gui_sumo.png" width="600" height="675" class="thumbborder" srcset="/w/images/3/3a/Fig_sumopy_gui_sumo.png 1.5x, /w/images/3/3a/Fig_sumopy_gui_sumo.png 2x" /></a></div></div>
<p>The simulation parameters are self-explaining, just hover with the mouse over the parameter name. The default parameters are typically suitable to run a first simulation. Select one of the output options in order to obtain specific simulation results. Regarding outputs, the <code> Output Sampling Time</code> for the different outputs may be of interest. If you observe in the simulations that vehicles get blocked at junctions for no obvious reason, then it is possible to resolve conflicts by setting the <code> Teleport</code> to a positive time (i.e. 10s).
</p><p>After pressing the <code> run</code> button, the SUMO-GUI interface pops up, ready for simulation, as shown Fig. <a href="/w/index.php?title=File:Fig_sumopy_gui_sumogui&amp;action=edit&amp;redlink=1" class="new" title="File:Fig sumopy gui sumogui (page does not exist)">here</a>.
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_sumopy_gui_sumogui.png" class="image" title="SUMO GUI window."><img alt="SUMO GUI window." src="../images/Fig_sumopy_gui_sumogui.png" width="800" height="563" class="thumbborder" srcset="/w/images/0/0c/Fig_sumopy_gui_sumogui.png 1.5x, /w/images/0/0c/Fig_sumopy_gui_sumogui.png 2x" /></a></div></div>
<p>Adjust delay time and press the Start button. At the end of the simulation, confirm OK and close the SUMO-GUI window. Simulation results are now imported into SUMOPy and are ready to be examined, visualized and exported in various formats.
</p>
<h3><span class="mw-headline" id="Viewing_results">Viewing results</span></h3>
<p>The results can be viewed in table format and graphically, see  <a href="../images/Fig_sumopy_gui_resultviewer.png" title="File:Fig sumopy gui resultviewer.png">here</a>.
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_sumopy_gui_resultviewer.png" class="image" title="Result viewer"><img alt="Result viewer" src="../images/Fig_sumopy_gui_resultviewer.png" width="800" height="499" srcset="/w/images/thumb/a/af/Fig_sumopy_gui_resultviewer.png/1200px-Fig_sumopy_gui_resultviewer.png 1.5x, /w/images/a/af/Fig_sumopy_gui_resultviewer.png 2x" /></a></div></div>
<p>In the object browse, the results per trip and the results per edge can be viewed. Both, trip and edge oriented result-table can be exported in CSV format, see the <code> Simulation&gt;Results</code> menu.
</p><p>Results are <i>not</i> saved when saving the scenario. Instead the results must be saved separately using
</p><p><code>Simulation&gt;Results&gt;Save as ...</code>
</p><p>At any time, results can be reopened with the scenario with which they have been produced, using:
</p><p><code>Simulation&gt;Results&gt;Open ...</code>
</p><p>In case the <code> Matplotlib</code> package is installed you can generate plots in various formats, choosing menu <code> Simulation&gt;Results&gt;Plot with matplotlib</code>. The pop-up dialog helps to configure the graphical details of the matplotlib plot.
From the matplotlib figure window, the graphical results can be exported in different file formats (PNG, PDF, JPEG, etc.), 
an example PNG file is shown <a href="../images/Fig_demo_noise.png" title="File:Fig demo noise.png">below</a>.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_demo_noise.png" class="image" title="Matplotlib result presentation"><img alt="Matplotlib result presentation" src="../images/Fig_demo_noise.png" width="800" height="580" srcset="/w/images/thumb/b/b8/Fig_demo_noise.png/1200px-Fig_demo_noise.png 1.5x, /w/images/thumb/b/b8/Fig_demo_noise.png/1600px-Fig_demo_noise.png 2x" /></a></div></div>
<h2><span class="mw-headline" id="Launching_SUMOPy">Launching SUMOPy</span></h2>
<p>As explained above, networks can be created from SUMO XML files, or a binary file can be loaded. Both operations can be performed from the command line.
</p>
<h3><span class="mw-headline" id="Loading_a_binary_scenario_at_start">Loading a binary scenario at start</span></h3>
<p>A previously saved, binary scenario with filename scenario.obj| can be loaded into SUMOPy at start using the commandline
</p><p>python sumopy-gui.py workdir/scenario.obj|
</p>
<h3><span class="mw-headline" id="Importing_SUMO_XML_files_at_start">Importing SUMO XML files at start</span></h3>
<p>An initial import of existing SUMO XML files with rootname scenario| and located in directory workdir| can be accomplished with
</p><p>python sumopy-gui.py scenario workdir|
</p>
<h2><span class="mw-headline" id="Importing_and_Editing_networks">Importing and Editing networks</span></h2>
<dl><dd> if needed, the network should be modified <i>before</i> moving on to demand modeling (see Sec.[sec<sub>d</sub>emand]).</dd></dl>
<h3><span class="mw-headline" id="Importing_nets_and_buldings">Importing nets and buldings</span></h3>
<p>Networks can be import from a SUMO net.xml file with
</p><p><code>network&gt;import&gt;from sumo net.xml ...</code>
</p><p>Networks can be converted and imported from a previously downloaded OSM file, calling a wizard with:
</p><p><code>network&gt;import&gt;from osm.xml ...</code>
</p><p>Different types of buildings, parks, car parking, leisure areas, etc (in SUMOPy called called “facilities”) 
are a property of the landuse object and can be extracted and imported from an OSM file with menu item
</p><p><code>landuse&gt;facilities&gt;import from osm...</code>
</p><p>Sometimes special characters in the XML file are offending the python XML parser, leading to errors during import. 
If this occurs, simply “clean” the respective OSM file with
</p><p><code>landuse&gt;facilities&gt;clean osm file...</code>
</p><p>prior to importing it.
</p>
<h3><span class="mw-headline" id="Editing_with_SUMO.E2.80.99s_Netedit">Editing with SUMO’s Netedit</span></h3>
<p>The recommended way to edit the network is via netedit|, which is provided with SUMO from version 0.25. SUMO’s netedit| can be called by choosing the menu
</p><p><code>Network&gt;Edit with netedit</code>
</p><p>netedit| will be fired up with the network ready to be edited. The use of netedit| is documented here: <a rel="nofollow" class="external free" href="http://sumo.dlr.de/wiki/NETEDIT">http://sumo.dlr.de/wiki/NETEDIT</a>. After editing, the network must be saved within netedit| be pressing <code>&lt;CTRL&gt;</code>-s or with File&gt;save|. Then netedit| can be closed and the modified network will be reimported into SUMOPy.
</p>
<h3><span class="mw-headline" id="Editing_with_SUMO.E2.80.99s_Netedit_on_background_maps">Editing with SUMO’s Netedit on background maps</span></h3>
<p>There is a possibility to edit the network with netedit| on background maps. Currently these are Google Satellite maps. Before editing with background maps, the maps must be downloaded for the given network area. This is accomplished by a wizard which can be called selecting the menu item<sup id="cite_ref-1" class="reference"><a href="#cite_note-1">[1]</a></sup>.
</p><p><code>landuse&gt;maps&gt;download...</code>
</p><p>The wizard helps to download the squared tiles which cover the network area. The resolution can be defined by setting the tile width (and height) in meters. The tile size in pixel is maximum 1280 (using the Google Map server). The resolution is then tile size/tile width in pixel per meter.
</p><p>it is highly recommended to press the Apply| Button prior to downloading the maps. This will calculate the number of tiles which are going to be downloaded. This is important to know, because Google maps prevent IPs from downloading too many maps of an area. Therefore do not exceed about 300 tiles! Note further that, dependent on the performance of your computer, netedit| may run into problems to handle too large map areas.
</p><p>After the maps are downloaded, netedit| can be called with
</p><p><code>Network&gt;Edit with netedit on map</code>
</p><p>in order to edit the SUMO network on a map.
</p>
<h3><span class="mw-headline" id="Editing_with_SUMOPy_Networkeditor">Editing with SUMOPy Networkeditor</span></h3>
<p>The SUMOPy internal net-editor provides currently some limited capability to edit the network
</p>
<ul><li> The geometry of edges and buildings can be manipulated: Activate the Move| tool to move or the Stretch| to change vertexes.</li>
<li> With the menu <code>Network&gt;Clean nodes</code> all edges entering a node are “cut back” to a certain radius. This measure may facilitate the verification of connections between lanes at junctions.</li></ul>
<h2><span class="mw-headline" id="Demand_modeling">Demand modeling</span></h2>
<p>In the framework of SUMO, demand generation means essentially the generation of traffic participants (persons and/or different types of vehicles ) and the generation of a route for each traffic participant. It is recommeded to start with demand generation only after the network has been edited. In any case it is good practice to save a scenario with the network only (without demand info).
</p><p>All available vehicle types<sup id="cite_ref-2" class="reference"><a href="#cite_note-2">[2]</a></sup> can be browsed and modified under:
</p><p><code>scenario.demand.vtypes</code>
</p><p>Note that each vehicle type belongs to a vehicle class, also called modes.
</p><p>The different demand generation methods, as described below, will generate trips and routes, which can be browsed in
</p><p><code>scenario.demand.trips</code> and <code>scenario.demand.trips.routes</code>
</p><p>In fact, the different demand generation methods could also be used in combination.
</p>
<h3><span class="mw-headline" id="Zone_to_zone_demand_flows">Zone to zone demand flows</span></h3>
<p>We first explain the general concept of Zone to zone demand generation before we describe how to procede with SUMOPy.
</p>
<ol><li> <i>Zone definition</i>: Definition of Zones, in SUMO also called “Traffic Assignment Zones” (TAZ). A TAZ defines the area where participants depart (zone of origin) or arrive (zone of destination). A TAZ does typically contain several network edges.</li>
<li> <i>Zone-to-Zone flow definition</i>: Definition the number of trips between each zone of origin and a zone of destination (= OD-flow). This structure is widely known as the Origin-to Destination matrix OD Matrix. OD-flows are defined.
<ul><li> for different time intervals of the day.</li>
<li> for different transport mode.</li></ul></li>
<li> <i>Trip generation</i>: Each OD-flow is disaggregated into a discrete number of individual trips, departing at different edges (and edge positions) within the zone of origin, and at different time instances within the specified time interval; and arriving at different edges (and edge positions) within the zone of destination.</li>
<li> <i>Routing</i>: A route is computed for each individual trip, connecting the edge within the zone of origin, with the edge within the zone of destination.</li></ol>
<p>These steps can be performed with SUMOPy as follows.
</p><p>From the  SUMOPy network manipulation tools, select the  <code> Add zone tool</code>.
</p><p>After giving the zone a name <sup id="cite_ref-3" class="reference"><a href="#cite_note-3">[3]</a></sup> a polygon can be drawn on the network with a series of <code> &lt;Button-Left&gt;</code> - clicks. Complete the zone with a final <code> &lt;Double-Button-Left&gt;</code> - click. A <code> &lt;Double-Button-Right&gt;</code> - click will aboard the current zone drawing. Currently, zones must be convex, otherwise edge detection problems occur.
</p><p>Only edges which are located entirely inside a zone are considered part of a zone. Only edges inside a zone are considered for departure or arrival of vehicles in the respective zone. After creating the zones you can identify all edges in each zone by selecting the menu item
</p><p><code>Landuse&gt;Zones&gt;Identify zone edges</code>
</p><p>It is possible to see all zone edges and and change zone names by using the information tool and by clicking on the green zone border. Zones are accessible under <code>scenario.demand.zones</code>. Zones can also be deleted with the <code> Delete tool</code> of the network editor.
</p><p>Zone-to-Zone flows can be added by selecting the menu item
</p><p><code>Demand&gt;Zone-to-zone demand&gt;Add zone-to-zone flows</code>
</p><p>An “Add OD flow wizard” will pop up as shown in Fig. <a href="../images/Fig_sumopy_gui_odwizard.png" title="File:Fig sumopy gui odwizard.png">below</a>.
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_sumopy_gui_odwizard.png" class="image" title="Add OD wizard"><img alt="Add OD wizard" src="../images/Fig_sumopy_gui_odwizard.png" width="600" height="587" srcset="/w/images/6/6a/Fig_sumopy_gui_odwizard.png 1.5x, /w/images/6/6a/Fig_sumopy_gui_odwizard.png 2x" /></a></div></div>
<p>With this wizard, specify the time interval (in entire seconds) and the transport mode. On the menu of the wizard select <code> Edit&gt;Add OD-flow to table</code>. 
Then a new row will appear in the table. Enter the zones of origin and destination and the respective number of trips between them.
</p><p>Instead of entering the OD flows manually, the wizard offers also the possible to import OD-flows from a CSV file. Select from the wizard menu:
</p><p><code> File&gt;Import CSV ...</code>
</p><p>and choose a CSV file from the file-dialog window. The CSV file must have the following format:
</p>
<pre>&lt;zone name origin 1&gt;, &lt;zone name destination 1&gt;,&lt;trip number 1&gt;
&lt;zone name origin 2&gt;, &lt;zone name destination 2&gt;,&lt;trip number 2&gt;
...</pre>
<p>Once the OD flows are all entered, press <code> Save flows</code>. The scale factor can be used to multiply all entered trips with a constant (default is 1) wwhile saving. The demand flows are now saved to SUMOPy and can be browsed and modified under
</p><p><code>scenario.demand.odintervals</code>
</p><p>Generate trips from OD flows by selecting menu item
</p><p><code>Demand&gt;Zone-to-zone demand&gt;Generate trips from flows</code>
</p><p>The generated trips can be browsed and modified under
</p><p><code>scenario.demand.trips</code>
</p><p>Perform a shortest path routing for each trip by selecting
</p><p><code>Demand&gt;Trips and router&gt;Trips to routes with shortest path</code>
</p><p>The generated route can be browsed under
</p><p><code>scenario.demand.trips.routes</code>
</p><p>With this method, SUMO’s duarouter is used to perform the routing. Note that each trip is now linked to a route (see ID route column in trips). If there is no route then the edge in the zone of origin is probably not connected to the edge in the zone of destination <sup id="cite_ref-4" class="reference"><a href="#cite_note-4">[4]</a></sup>. The router does not route pedestrians, but this is not necessary as their exact route will be determined during simulation.
</p><p>The scenario is now ready to be simulated by selecting
</p><p><code>Simulation&gt;Sumo&gt;export routes and simulate...</code>
</p><p>Proceed as described in Sec. <a href="#Simulating_the_scenario">#Simulating the scenario</a>.
</p><p>A test file for OD demand is located in
</p><p><code>SUMOHOME/tools/contributed/sumopy/testscenario/demo_dem_od_bikes.csv</code>
</p>
<h3><span class="mw-headline" id="Turn_flows">Turn flows</span></h3>
<p>Trip generation with turnflows allows to model traffic flows in a precise way, for simple, possibly loop-free networks with few internal traffic generation. The general idea is to generate trips and routes for individual vehicles based on road traffic counts. These traffic counts can be performed at junctions. Ideally, the traffic counts should be performed simultaneously at all relevant junctions. However, some edge flows can be derived from other edge flows considering flow preservation lows at nodes.
</p><p>Basically two types of flows are needed in order to reconstruct the routes in a predefined study area:
</p>
<ul><li> The <i>generating flows</i> <span><i>FG[a]</i></span> on all edges <span><i>a</i></span> that <i>enter</i> the study area. <sup id="cite_ref-5" class="reference"><a href="#cite_note-5">[5]</a></sup></li>
<li> The <i>turn flows</i> <span><i>FT[a1,a2]</i></span> for all flows between links <span><i>a1</i></span> and <span><i>a2</i></span> at nodes with more than one exiting edge.</li></ul>
<p>The choice of traffic flows that need to be counted is illustrated by an example network:
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_demand_turnsflows_png.png" class="image" title="Example network to illustrate the use of turnflows for demand modeling."><img alt="Example network to illustrate the use of turnflows for demand modeling." src="../images/Fig_demand_turnsflows_png.png" width="450" height="465" srcset="/w/images/thumb/d/d2/Fig_demand_turnsflows_png.png/675px-Fig_demand_turnsflows_png.png 1.5x, /w/images/d/d2/Fig_demand_turnsflows_png.png 2x" /></a></div></div>
<p>Neglecting all traffic generated within the study area, the following flows need to be counted:
</p>
<ul><li> The <i>generating flows</i> <span><i>FG[3], FG[12] </i></span> are entering the network.</li>
<li> The <i>turn flows</i> <span><i>F[8,9], F[8,2] </i></span> at node <span><i>6</i></span> and <span><i>F[12,4], F[12,7] </i></span> at node <span><i>3</i></span>. All other nodes have only one exiting edge.</li></ul>
<p>Once the necessary flows are counted for all considered transport modes and time intervals, the trips and routes of all vehicles 
can be generated with a special router, called JTRouter. 
</p><p>With SUMOPY the route generation with SUMOPY works as follows:
First import flows and turnflows from a CSV file by selecting the menu item
</p><p><code>Demand&gt;Turnflows&gt;Import turnflows</code>
</p><p>The import turnflows dialog will pop up, as shown below.
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_sumopy_gui_turnflowwizard.png" class="image" title="Dialog for importing turnflow CSV files"><img alt="Dialog for importing turnflow CSV files" src="../images/Fig_sumopy_gui_turnflowwizard.png" width="600" height="478" srcset="/w/images/2/2f/Fig_sumopy_gui_turnflowwizard.png 1.5x, /w/images/2/2f/Fig_sumopy_gui_turnflowwizard.png 2x" /></a></div></div>
<p>This dialog is similar to the OD-flow wizard explained in Sec. <a href="#Zone_to_zone_demand_flows">#Zone to zone demand flows</a> and allows to import traffic counts, and associate them with a time interval and a transport mode.
</p><p>The <code> Turnflow File</code> to be imported contains the traffic counts of both flow types, generating flows and turnflows. The turnflow file has the following format:
</p>
<pre>&lt;ID1&gt;, &lt;count 1&gt;, &lt;ID11&gt;, &lt;count 11&gt;,  &lt;ID12&gt;, &lt;count 12&gt;, ...
&lt;ID2&gt;, &lt;count 2&gt;, &lt;ID21&gt;, &lt;count 21&gt;,  &lt;ID22&gt;, &lt;count 22&gt;, ...
...</pre>
<p>This notation has the following meaning:
</p><p><code>&lt;IDa&gt;</code> means the SUMO edge ID of edge  <span><i>a</i></span>, where edge  <span><i>a</i></span> is the edge entering a node.
</p><p><code>&lt;IDab&gt;</code> means the SUMO edge ID of edge  <span><i>ab</i></span>, where edge  <span><i>ab</i></span> is the edge outgoing from the node which edge  <span><i>a</i></span> enters.
</p><p><code>&lt;count a&gt;</code> means the number of vehicles leaving edge <span><i>a</i></span>, in case the edge is generating flows, otherwise this count is zero.
</p><p><code>&lt;count ab&gt;</code> means the number of vehicles from edge <span><i>a</i></span> turning into edge <span><i>b</i></span>.
</p><p>All counts in this file refer to the mode and time interval specified in the dialog box.
</p><p>The turnflow file for the example network shown <a href="/w/index.php?title=File:Fig_demand_turnsflows.png&amp;action=edit&amp;redlink=1" class="new" title="File:Fig demand turnsflows.png (page does not exist)">above</a>, could look like this:
</p>
<pre>3, 1000
12, 800, 4, 200, 7, 600
8, 0, 9, 800, 2, 400</pre>
<p>In this case, the generating flows <span><i>FG[3]=1000, F[12]=800 </i></span> and the turn flows <span><i>FT[8,9] = 800, FT[8,2] = 400 </i></span> and <span><i>FT[12,4] = 200, FT[12,7] = 500</i></span> for a specific mode and time interval.
</p><p><i>Hint:</i> In order to quickly compile the turnflow file, open a text editor and the SUMOPy window next to each other. In the SUMOPy network editor, un-select lanes, connections and crossings by clicking on the button next to the zoom buttons below the network canvas. Then select the info tool (if not already active) and click on the edges you consider for the turnflow file. The respective edge will be highlighted and you can see all edge attributes in the object browser, as shown below:
</p>
<div class="center"><div class="floatnone"><a href="../images/Fig_sumopy_gui_edgeid.png" class="image"><img alt="Fig sumopy gui edgeid.png" src="../images/Fig_sumopy_gui_edgeid.png" width="400" height="657" srcset="/w/images/7/70/Fig_sumopy_gui_edgeid.png 1.5x, /w/images/7/70/Fig_sumopy_gui_edgeid.png 2x" /></a></div></div>
<p>From there, copy the SOMO edge ID and paste it into your turnflow text file.
</p><p>Optionally define destination zones: Within the turnflow demand model destination zones define edges where vehicle routes end. This may be necessary in order to prevent vehicles of making a loop on the network outside the study area and reentering the study area. Destination zones for turnflows are created in the same way as Traffic assignment Zones in section <a href="#Zone_to_zone_demand_flows">#Zone to zone demand flows</a>.
</p><p>Generate directly route from flows and turn-flows information by selecting menu item
</p><p><code>Demand&gt;Turnflows&gt;Turnflows to routes</code>
</p><p>This process is using SUMO’s JTROUTER and will generate both trips and routes. The scenario is now ready to be simulated by selecting
</p><p><code>Simulation&gt;Sumo&gt;export routes and simulate...</code>
</p><p>Proceed as described in Sec. <a href="#Simulating_the_scenario">#Simulating the scenario</a>.
</p><p>A test file for turnflows is located in
</p><p><code>SUMOHOME/tools/contributed/sumopy/testscenario/demo_dem_tf_car.csv</code>
</p>
<h2><span class="mw-headline" id="Simulation_processes">Simulation processes</span></h2>
<p>This section addresses some particular simulation issues.
</p>
<h3><span class="mw-headline" id="Simulating_Sublanes">Simulating Sublanes</span></h3>
<p>Sublanes is a new feature in SUMO since 2015. The simulation with Sublanes render traffic flows on roads more realistic. With sublanes, several vehicles can share side-by-side the same lane given there is enough room. For example a car can pass a bicycle on the same lane if the total lane width is larger than the bike width plus car width.
</p><p>For sublane simulation with SUMOPy, simply browse to
</p><p><code>scenario.demand.vtypes</code>
</p><p>and set the lanechange model model to SL2015. Note that SUMOPy applies the same lanechange model to all vehicle types. Then run the simulation with
</p><p><code>Simulation&gt;Sumo&gt;export routes and simulate...</code>
</p><p>Note that on the SUMO dialog, the sublane width is now positive (1m by default). This value (which can be changed) determines how many sublanes can stay within one lane. For example a 3m wide lane can have 3 sublane of 1m but only 2 sublane of width 1.5m.
</p><p>The lanechange behavior with sublanes can be tweaked for each vehicle type with the sublane parameters in <code>scenario.demand.vtypes</code>.
</p>
<ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="#cite_ref-1">↑</a></span> <span class="reference-text">In SUMOPy Maps are managed by the landuse object</span>
</li>
<li id="cite_note-2"><span class="mw-cite-backlink"><a href="#cite_ref-2">↑</a></span> <span class="reference-text">Of course in a traffic scenario we have usually more than one participant of each type</span>
</li>
<li id="cite_note-3"><span class="mw-cite-backlink"><a href="#cite_ref-3">↑</a></span> <span class="reference-text">zone names can added/modified later via browser</span>
</li>
<li id="cite_note-4"><span class="mw-cite-backlink"><a href="#cite_ref-4">↑</a></span> <span class="reference-text">there can be several reasons for this, usually the destination edge is in access-restricted areas, or there are one-way roads, impeding access. Actually this should not happen too often, as the disaggregation algorithm should verify accessibility</span>
</li>
<li id="cite_note-5"><span class="mw-cite-backlink"><a href="#cite_ref-5">↑</a></span> <span class="reference-text">In addition, traffic flows can also be generated on edges within the study area, but in practice it is difficult to measure those flows because one would need to spot and count only departing vehicles along the roads of the study area. However, for some particular edges with many departing vehicles this may be necessary to do.</span>
</li>
</ol>

<!-- 
NewPP limit report
CPU time usage: 0.188 seconds
Real time usage: 0.210 seconds
Preprocessor visited node count: 275/1000000
Preprocessor generated node count: 656/1000000
Post‐expand include size: 213/2097152 bytes
Template argument size: 110/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    5.576      1 - -total
100.00%    5.576      1 - Template:Source
 40.66%    2.267      1 - Template:SUMO
-->

<!-- Saved in parser cache with key sumoSimWiki:pcache:idhash:752-0!*!0!!en!5!* and timestamp 20170501153428 and revision id 8380
 -->
</div>									</div><hr/><div id="lastmod">This page was last modified on 24 November 2016, at 17:58.</div> </div>

    <div id="footer">
      <div>
        (c) 2011-2013, German Aerospace Center, Institute of
        Transportation Systems
      </div>

      <div>
        Layout based on <a href=
        "http://www.oswd.org/design/preview/id/3365">"Three
        Quarters"</a> by "SimplyGold"
      </div>
    </div>
  </div>
</body>
</html>
